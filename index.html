<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<style>
body{
  font-family:system-ui,-apple-system,sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:20px;
}

.container{
  max-width:800px;
  margin:auto;
}

.card{
  background:white;
  border-radius:16px;
  overflow:hidden;
  margin-bottom:20px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
  transition:.2s;
}

.card:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 26px rgba(0,0,0,.12);
}

.img{
  width:100%;
  height:200px;
  object-fit:cover;
}

.content{
  padding:18px;
}

.title{
  font-size:20px;
  font-weight:600;
  margin-bottom:8px;
}

.meta{
  color:#666;
  font-size:14px;
  margin-bottom:6px;
}

.price{
  font-weight:600;
  margin-top:6px;
}

.badge{
  display:inline-block;
  padding:4px 8px;
  background:#ff4d4f;
  color:white;
  font-size:12px;
  border-radius:6px;
  margin-top:8px;
}

.countdown{
  font-size:13px;
  margin-top:6px;
  color:#444;
}

.btn{
  display:inline-block;
  margin-top:14px;
  padding:10px 16px;
  background:black;
  color:white;
  border-radius:10px;
  font-size:14px;
  text-decoration:none;
}
</style>
</head>

<body>

<div class="container" id="events">
Loading events...
</div>

<script>
fetch("https://fienta.com/api/v1/public/events?organizer=27119")
.then(r=>r.json())
.then(data=>{

  const container=document.getElementById("events");

  // sort by soonest event
  const events = data.events.sort((a,b)=>
    new Date(a.start_datetime)-new Date(b.start_datetime)
  );

  container.innerHTML="";

  events.forEach(ev=>{

    const start = ev.start_datetime
      ? new Date(ev.start_datetime)
      : null;

    const date = start
      ? start.toLocaleString()
      : "Date TBA";

    // countdown
    let countdown="";
    if(start){
      const diff = start - new Date();
      if(diff>0){
        const days=Math.floor(diff/86400000);
        const hours=Math.floor(diff/3600000)%24;
        countdown=`Starts in ${days}d ${hours}h`;
      }
    }

    // price
    let price="Free";
    if(ev.price_from){
      price=`From ${ev.price_from} ${ev.currency||""}`;
    }

    // sold out
    const soldOut = ev.available===false || ev.status==="sold_out";

    const card=document.createElement("div");
    card.className="card";

    card.innerHTML=`

      ${ev.image ? `<img src="${ev.image}" class="img">` : ""}

      <div class="content">

        <div class="title">${ev.title}</div>

        <div class="meta">${date}</div>

        ${ev.venue ? `<div class="meta">${ev.venue}</div>` : ""}

        <div class="price">${price}</div>

        ${countdown ? `<div class="countdown">${countdown}</div>`:""}

        ${soldOut ? `<div class="badge">Sold Out</div>`:""}

        <a href="${ev.url}" target="_blank" class="btn">
          View Event
        </a>

      </div>
    `;

    container.appendChild(card);
  });

});
</script>

</body>
</html>
